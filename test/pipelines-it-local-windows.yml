jobs:
- job: 'Test'

  steps:
  - script: |
      node --version
    displayName: 'node version'
  - task: PowerShell@2
    continueOnError: true
    inputs:
      targetType: 'filePath'
      filePath: install.ps1
    displayName: 'Install nni toolkit via source code'
  - script: |
      python -m pip install scikit-learn==0.20.0 --user
      python -m pip install keras==2.1.6 --user
      python -m pip install tensorflow-gpu==1.12.0 --user
    displayName: 'Install dependencies for integration tests'
  - task: PowerShell@2
    inputs:
      targetType: 'filePath'
      filePath: $CWD/test/unittest.ps1
    displayName: 'unit test'